model {

#Priors
B0.mean ~ dunif(-10,10)
tau.B0 <- 1/(sigma.B0*sigma.B0)
sigma.B0 ~ dunif(0,10)

B.DOS ~ dnorm(0, 0.1)
B.DOS2 ~ dnorm(0, 0.1)

for(j in 1:nSite) {
  for(t in 1:nSeason) {
    B0[j, t] ~ dnorm(B0.mean, tau.B0)
  }
}

for(i in 1:nBird) {
  for(j in (first[i] + 1):last[i]) {
    ymat[i, j] ~ dbern(S[i, j]*ymat[i, j-1])
    }
  for(j in 1:nDOS) {
    logit(S[i, j]) <- B0[SiteInd[i], SeasonInd[i]] + B.DOS*DOS[i, j] +
      B.DOS2*pow(DOS[i, j], 2)
    }
  }
}
